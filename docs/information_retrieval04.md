# 정보 검색 (Information Retrieval, IR) 학습

## 1. 사용자 행동 분석과 암묵적 피드백

- **명시적 관련성 피드백 (Explicit Relevance Feedback)의 문제점**:
    - 사용자에게 직접적인 판단(예: "이 문서는 관련 있음/없음")을 요구하므로 번거롭고, 사용자의 적극적인 참여가 필요합니다.
    - 실제 상용 검색 엔진에서는 스팸(Spam)이나 어뷰징(Abusing)에 취약할 수 있습니다. (예: 경쟁사 결과에 대해 부정적 피드백 반복)
- **암묵적 사용자 피드백 (Implicit User Feedback)의 필요성**:
    - 사용자의 자연스러운 상호작용(예: 클릭, 스크롤, 체류 시간 등)으로부터 간접적으로 관련성 정보를 추론하는 방식입니다.
    - *클릭 데이터(Clickthrough Data)**가 대표적인 암묵적 피드백의 원천입니다.
        - **장점**: 저비용으로 대량 수집이 가능하고, 실제 사용자의 자연스러운 행동을 반영합니다.
        - **단점**: 클릭이 반드시 문서의 실제 관련성을 의미하지는 않습니다. (Noise가 많음)

## 2. 클릭 데이터의 신뢰성 문제 및 사용자 행동 분석

- **클릭이 발생하는 이유 (항상 관련성과 일치하지 않음)**:
    - **제목/스니펫(Title/Snippet)의 매력도**: 문서 전체 내용을 읽기 전에 제목이나 요약문이 흥미로워 클릭할 수 있습니다.
    - **순위 편향 (Position Bias)**: 사용자는 검색 결과의 상위 링크를 더 신뢰하고 먼저 살펴보는 경향이 있습니다. (실제 관련성과 무관하게 상위 링크 클릭 확률 증가)
    - **이미 알고 있는 정답**: 사용자가 특정 웹사이트나 정보를 찾고 있었고, 해당 링크가 그 정답임을 알고 클릭할 수 있습니다.
- **클릭이 발생하지 않는 이유 (항상 비관련성을 의미하지 않음)**:
    - **즉각적인 답변 제공**: 제목/스니펫만으로도 사용자의 정보 요구가 충족될 수 있습니다. (예: 간단한 사실 확인, 지식 그래프 결과)
    - **스크롤 노력**: 하단에 있는 결과를 보기 위해 스크롤하는 추가적인 노력을 기울이지 않을 수 있습니다.
    - **결과 미인지**: 사용자가 해당 결과를 보지 못했을 수도 있습니다.
- **클릭 데이터의 신뢰성에 대한 연구 (Joachims, SIGIR’05 - 아이트래킹 연구)**:
    - **사용자 시선 이동 패턴**:
        - 사용자는 검색 결과를 위에서부터 아래로 순차적으로 스캔하는 경향이 있습니다.
        - 대부분 스크롤 없이 보이는 첫 5개 결과에 시선이 집중됩니다.
        - 두 번째 또는 세 번째 시선 고정(Fixation) 내에 상위 2개 결과를 봅니다.
    - **클릭 전 탐색 행동**:
        - 순위가 낮은 문서를 클릭할수록, 클릭 전에 더 많은 요약문(Abstract)을 살펴보는 경향이 있습니다.
    - **검색 결과 품질 조작 실험 (랭킹 역전)**:
        - 결과 품질이 낮아지면 사용자는 더 많은 요약문을 스캔하고, 첫 번째 결과를 덜 클릭하며, 평균 클릭 순위가 낮아지고, 쿼리당 평균 클릭 수가 감소합니다.
        - 이는 사용자가 결과의 관련성에 반응함을 시사합니다.
    - **클릭은 절대적인 관련성 판단인가?**:
        - **아니다.** 순위 1, 2위는 내용과 관계없이 높은 시선 집중도를 보입니다 (순위 편향).
    - **클릭은 상대적인 관련성 판단(선호도)인가?**:
        - **그렇다.** 명시적인 관련성 판단과 비교했을 때, 클릭을 상대적인 선호도로 해석하는 것이 더 정확합니다.
        - **쌍별 선호도 생성 휴리스틱 (Pairwise Preference Generation Heuristics)**:
            1. **클릭 > Skip Above**: 클릭된 문서는 그 위에 있었지만 클릭되지 않은 문서보다 선호된다.
            2. **Last Click > Skip Above**: 마지막으로 클릭된 문서는 그 위에 있었지만 클릭되지 않은 모든 문서보다 선호된다.
            3. **Click > Earlier Click**: (논란의 여지 있음) 나중에 클릭된 문서가 이전에 클릭된 문서보다 선호될 수 있다. (정보 탐색 과정 반영)
            4. **Last Click > Skip Previous**: 마지막으로 클릭된 문서는 바로 이전에 클릭되었지만 마지막 클릭이 아닌 문서보다 선호된다.
            5. **Click > Skip Next**: (주의 필요) 클릭된 문서는 그 바로 아래에 있었지만 클릭되지 않은 문서보다 선호된다.
        - 이러한 쌍별 선호도 데이터는 **Pairwise Learning to Rank 알고리즘 학습에 활용**될 수 있습니다. (예: RankSVM)

### 3. 사용자 검색 행동에 대한 추가 연구 (Guan, CHI’07 - 아이트래킹 연구)

- **탐색적 검색 (Navigational Search) vs. 정보형 검색 (Informational Search)**:
    - **탐색적 검색**: 특정 웹사이트를 찾으려는 목적. 첫 번째 결과에 대한 클릭 정확도가 매우 높음.
    - **정보형 검색**: 특정 주제에 대한 정보를 얻으려는 목적. 탐색적 검색보다 첫 번째 결과 클릭 정확도가 낮고, 사용자는 더 많은 결과를 살펴보는 경향.
- **클릭 실패의 원인**: 사용자가 관련 있는 결과를 **읽지 않아서** 클릭하지 못하는 경우가 많음. (특히 정보형 검색에서 두드러짐)
- **시선 집중 영역**: 검색 결과 페이지에서 사용자의 시선은 주로 제목, URL, 스니펫의 앞부분에 집중됩니다.

### 4. 온라인 광고에서의 순위 편향 및 CTR 보정 (Richardson, WWW’07)

- **광고 수익 극대화**: $\text{Ad Revenue} = \sum_{\text{ads}} P(\text{click } | \text{ ad}) \times \text{CPC(ad)}$
    - CPC (Cost Per Click): 클릭당 비용.
    - $P(\text{click } | \text{ ad})$: 광고가 클릭될 확률 (CTR - Click-Through Rate).
- **광고에서도 순위 편향 존재**: CTR이 낮은 것이 광고 자체의 품질 문제뿐만 아니라, 낮은 노출 위치 때문일 수 있습니다.
- **순위 편향을 명시적으로 모델링하여 CTR 보정**:
    - 클릭 확률 $P(\text{click } | \text{ ad, pos})$은 광고의 품질 $P(\text{relevant } | \text{ ad, pos})$과 해당 위치가 보여질 확률 $P(\text{seen } | \text{ pos})$의 곱으로 표현 가능.
    - $P(\text{click } | \text{ ad, seen=1}) = \frac{P(\text{click } | \text{ ad, pos})}{P(\text{seen } | \text{ pos})}$ (보정된 CTR)
    - $P(\text{seen } | \text{ pos})$ (노출 할인 인자, Discounting Factor)은 해당 위치가 클릭될 확률에 비례한다고 근사하여 추정.
    - 광고 특징을 이용한 로지스틱 회귀 등으로 $P(\text{relevant } | \text{ ad, pos})$ (품질) 추정.
- **평가**: 보정된 CTR이 새로운 광고의 CTR을 더 정확하게 예측하지만, 평가 데이터 자체도 편향된 클릭을 기반으로 한다는 한계가 있습니다.

### 5. 클릭 모델 (Click Models)

- **목표**: 순위 편향으로 인한 스킵(Position-driven Skips)과 실제 관련성 부족으로 인한 스킵(Relevance-driven Skips)을 분리하여 모델링합니다.
- **구성 요소**:
    - **Examination Probability ($P(\text{Examine})$)**: 사용자가 특정 위치의 검색 결과를 살펴볼 확률. (주로 위치에 따라 감소)
    - **Click Probability given Examination ($P(\text{Click } | \text{ Examine})$)**: 사용자가 결과를 살펴봤을 때 클릭할 확률. (문서의 실제 매력도/관련성에 의존)
- **주요 클릭 모델**:
    - **Cascade Model (Craswell et al., WSDM’08)**:
        - 사용자는 검색 결과를 위에서부터 순차적으로 탐색한다고 가정.
        - 각 위치에서 문서를 클릭할지, 아니면 다음 문서로 넘어갈지를 결정.
        - 한 페이지에서 단 하나의 클릭만 발생한다고 가정하는 경우가 많음. (일종의 "Click > Skip Above" 휴리스틱 반영)
    - **User Browsing Model (UBM) (Dupret et al., SIGIR’08)**:
        - Examination 확률이 현재 위치뿐만 아니라 **마지막 클릭 위치로부터의 거리**에도 의존한다고 가정. (절대적 할인 → 상대적 할인)
        - 문서의 매력도(Attractiveness, 쿼리와 URL 기반)와 Examination 확률을 분리하여 모델링.
        - EM 알고리즘을 사용하여 파라미터 추정.
        - ("Click > Skip Next" + "Click > Skip Above" 휴리스틱 조합과 유사)
    - **Dynamic Bayesian Model (DBM) (Chapelle et al., WWW’09)**:
        - Cascade 모델의 일종으로, 사용자의 만족도(Satisfaction)와 문서의 인지된 관련성(Perceived Relevance), 실제 관련성(Intrinsic Relevance)을 상태 변수로 하는 동적 베이즈 네트워크 사용.
    - **Content-Aware Click Model (Wang et al., WWW’12)**:
        - 사용자 검색 행동 내의 의존성을 다양한 기술적 특징(Descriptive Features)을 통해 명시적으로 인코딩.
        - 문서의 관련성 품질 (예: 랭킹 특징), 결과 추가 탐색 가능성 (예: 위치, 클릭 수, 마지막 클릭과의 거리), 탐색 후 클릭 가능성 (예: 클릭/스킵된 콘텐츠 간 유사도) 등을 고려.
- **클릭 모델의 활용**:
    - CTR 예측 정확도 향상.
    - 추정된 문서 관련성을 새로운 랭킹 특징으로 사용 가능.
    - 사용자 클릭 행동에 영향을 미치는 요인 분석.

### 6. 학습 요약 및 중요 포인트

- **클릭은 유용하지만 편향된 피드백**: 클릭 데이터는 대량으로 얻을 수 있는 강력한 암묵적 피드백이지만, 순위 편향 등 다양한 요인의 영향을 받으므로 신중하게 해석하고 사용해야 합니다.
- **상대적 선호도로서의 클릭**: 클릭을 절대적인 관련성보다는 문서 간의 상대적인 선호도를 나타내는 신호로 해석하는 것이 더 정확합니다. (Pairwise LTR에 활용)
- **순위 편향 모델링**: 검색 결과의 위치가 클릭에 미치는 영향을 명시적으로 모델링하여(예: CTR 보정, 클릭 모델) 더 정확한 관련성 추정 및 CTR 예측이 가능합니다.
- **클릭 모델의 발전**: 단순한 위치 기반 가정에서 시작하여, 사용자 내부 상태(만족도 등)나 문서 내용 간의 관계까지 고려하는 복잡한 모델로 발전하고 있습니다.
- **실제 적용**: 이러한 클릭 모델과 분석은 검색 엔진, 광고 시스템, 추천 시스템 등 사용자 인터랙션이 중요한 다양한 분야에서 랭킹 품질 개선 및 사용자 경험 최적화에 기여합니다.

---

## 정보 검색(IR) - 링크 분석(Link Analysis) 학습 내용 정리

---

### 1. 문서 구조의 이해: 단순한 단어의 나열을 넘어서

- **전통적인 가정의 한계**:
    - 과거 정보 검색(IR)에서는 문서를 단순히 "단어의 순서(sequence of words)"로, 쿼리를 "짧은 문서"로, 코퍼스를 "문서의 집합"으로 가정했습니다.
    - 그러나 실제 웹 문서는 제목, 본문, 앵커 텍스트 등 다양한 **구조(Structure)**를 가지고 있으며, 이는 문서의 의미와 관련성을 파악하는 데 중요한 단서가 됩니다.
- **문서 내 구조 (Intra-document Structures)**:
    - **제목 (Title)**: 문서의 간결한 요약.
    - **단락 (Paragraphs)**: 특정 주제에 대한 상세 설명 (첫 번째 단락은 초록의 역할을 할 수 있음).
    - **앵커 텍스트 (Anchor Texts)**: 다른 문서를 참조하는 링크의 텍스트. 해당 링크가 가리키는 문서의 내용을 요약하거나 설명.
    - **이미지 (Images)**: 문서 내용에 대한 시각적 설명.
    - **중요도 차이**: 문서 내 각 부분은 문서의 전체 관련성에 서로 다른 기여를 할 수 있습니다.
- **문서 내 구조를 활용한 검색 모델 개선 (예: Query-Likelihood Model)**:
    - 문서의 각 부분($D_j$)이 쿼리 단어($w_i$) 생성에 기여하는 확률($P(w_i|D_j, R=1)$)과, 해당 부분이 선택될 확률($P(D_j|D, R=1)$)을 고려하여 전체 쿼리 생성 확률을 모델링할 수 있습니다.
    - $P(Q|D,R=1) = \prod_{i=1}^{n} P(w_i|D,R=1) = \prod_{i=1}^{n} \sum_{j=1}^{k} P(w_i|D_j,R=1)P(D_j|D,R=1)$
    - $P(D_j|D, R=1)$는 각 부분의 중요도를 나타내는 가중치 역할을 하며, EM 알고리즘으로 추정하거나 수동으로 설정할 수 있습니다.
    - 벡터 공간 모델에서는 각 부분에 다른 TF 가중치를 부여하는 방식으로 활용 가능합니다.

### 2. 문서 간 구조 (Inter-document Structure): 링크의 의미

- **문서의 독립성 가정의 한계**: 웹 문서는 하이퍼링크를 통해 서로 연결되어 있으며, 이는 문서 간의 관계를 나타냅니다.
- **링크가 제공하는 정보**:
    - **앵커 텍스트 (Anchor Text)**:
        - 다른 페이지에서 현재 페이지를 어떻게 설명하는지를 보여줍니다. (예: IBM 공식 웹사이트에는 없지만, 다른 페이지에서 "big blue"라는 앵커 텍스트로 IBM을 링크할 수 있음)
        - 쿼리 확장(Query Expansion)의 좋은 소스가 되거나, 직접 색인(Index)에 포함될 수 있습니다.
    - **연결 관계 (Linkage Relation)**:
        - 다른 페이지로부터의 링크는 해당 페이지의 **유용성(Utility) 또는 권위(Authority)**를 나타내는 일종의 "추천" 또는 "지지(Endorsement)"로 해석될 수 있습니다.

### 3. 링크 분석 (Link Analysis)의 개념 및 중요성

- **학술 논문 인용 네트워크와의 유사성 (Bibliometrics)**:
    - 논문 인용은 해당 논문의 지적 가치에 대한 인정이자 유용성에 대한 "투표"로 간주될 수 있습니다.
    - 인용 횟수(Citation Count)는 논문의 품질을 나타내는 지표가 될 수 있습니다. (웹에서는 In-link 수와 유사)
- **웹 환경에서의 복잡성**:
    - 하이퍼링크 생성 비용이 거의 없어 웹 스패머(Web Spammer)들이 이를 악용할 수 있습니다. (예: 인위적으로 In-link 수를 늘리는 기계 생성 페이지, 가짜/보이지 않는 링크)
    - 단순히 In-link 수뿐만 아니라, **각 In-link의 품질**을 함께 고려해야 합니다.
- **링크 구조 분석의 역할**:
    - 웹 네트워크 구조의 특성을 기술합니다.
    - 일반적인 의미에서 웹 문서의 유용성을 반영합니다.
    - 문서 랭킹의 중요한 요소로 활용됩니다. (Learning-to-Rank의 특징, Focused Crawling의 우선순위 결정 등)

### 4. PageRank 알고리즘 (Larry Page & Sergey Brin)

- **기본 아이디어: 임의 보행 모델 (Random Surfing Model)**:
    1. 웹 서퍼는 임의의 페이지에서 시작하여 무작위로 링크를 따라 이동합니다.
    2. 현재 페이지에서 나가는 링크(Out-link) 중 하나를 균일한 확률로 선택하여 다음 페이지로 이동합니다.
    3. 나가는 링크가 없는 막다른 페이지(Dead End)에 도달하면, 웹 전체 페이지 중 하나로 임의로 점프(Random Jump)합니다. (또는 모든 페이지에서 일정 확률로 임의 점프)
    4. 이 과정을 무한히 반복합니다.
- **PageRank 점수**:
    - 임의의 웹 서퍼가 특정 웹 페이지에 도달할 확률 (정상 상태 분포, Stationary Distribution).
    - 웹 페이지의 **인기도(Popularity)**를 나타내는 척도로, 링크 구조에만 의존합니다.
- **PageRank 계산 공식 (Iterative Update)**:
    - $PR(u) = \sum_{v \in B_u} \frac{PR(v)}{L(v)}$ (기본 형태, $B_u$: $u$를 가리키는 페이지 집합, $L(v)$: $v$에서 나가는 링크 수)
    - **Damping Factor ($\alpha$ 또는 $d$) 도입**:
        - $PR(u) = (1-\alpha) \sum_{v \in B_u} \frac{PR(v)}{L(v)} + \frac{\alpha}{N}$ (여기서 $N$은 전체 페이지 수)
        - 또는, $PR_t(u) = \alpha \sum_{v \in B_u} \frac{PR_{t-1}(v)}{L(v)} + \frac{1-\alpha}{N}$ (슬라이드 표기: $PR_t(u) = M^T PR_{t-1}(u)$ 에서 $M$은 변형된 전이 행렬)
        - $\alpha$ (또는 $d$): 서퍼가 링크를 따라갈 확률 (보통 0.85). $1-\alpha$: 서퍼가 임의의 페이지로 점프할 확률.
        - Damping factor는 막다른 페이지 문제와 Spider trap 문제를 해결하고, 모든 페이지가 0이 아닌 PageRank 값을 갖도록 보장합니다.
- **PageRank의 이론적 모델: 마르코프 연쇄 (Markov Chains)**:
    - 웹 페이지를 상태(State)로, 페이지 간 링크를 상태 전이(Transition)로 하는 이산 시간 확률 과정입니다.
    - **전이 행렬 (Transition Matrix, M)**: $M_{ij}$는 페이지 $j$에서 페이지 $i$로 이동할 확률. (각 열의 합은 1인 확률 행렬)
    - **마르코프 속성 (Markov Property)**: 다음 상태는 오직 현재 상태에만 의존합니다 (1차 마르코프 연쇄).
    - **정상 상태 분포 ($\pi$)**: $\pi = M\pi$를 만족하는 확률 벡터. PageRank 점수는 이 정상 상태 분포에 해당합니다.
        - 존재 조건: 마르코프 연쇄가 **기약적(Irreducible)**이고 **비주기적(Aperiodic)**이어야 합니다. (PageRank의 Random Jump는 이를 만족시킴)
- **PageRank 계산 방법**:
    - **멱 반복법 (Power Iteration)**: 초기 PageRank 벡터(예: 모든 페이지에 $1/N$)에서 시작하여, $PR_{t} = M^T PR_{t-1}$ (또는 슬라이드 표기 $PR(t) = M \cdot PR(t-1)$ 에서 $M$이 행 기준 전이 확률일 때, 또는 $PR(t)^T = PR(t-1)^T \cdot M$) 연산을 수렴할 때까지 반복합니다.
    - 수렴 속도는 전이 행렬의 두 번째로 큰 고유값(Eigenvalue)에 의해 결정됩니다.
    - PageRank 점수는 전이 행렬의 가장 큰 고유값(1)에 해당하는 주요 고유 벡터(Principal Eigenvector)입니다.
- **PageRank 변형**:
    - **주제 민감 PageRank (Topic-Specific PageRank / Personalized PageRank)**:
        - 임의 점프 시 모든 페이지가 아닌, 특정 주제와 관련된 페이지 집합으로만 점프하도록 제어합니다.
        - $PR_t(u) = [\alpha M + (1-\alpha) \vec{v} \mathbf{1}^T] PR_{t-1}(u)$ (여기서 $\vec{v}$는 주제 관련 페이지에만 0이 아닌 값을 갖는 편향 벡터)
        - 사용자의 관심사를 여러 주제의 혼합으로 보고, 각 주제별 PageRank를 계산한 후 가중 합산하여 개인화된 랭킹 제공 가능.
    - **LexRank (Erkan & Radev, JAIR’04)**:
        - 문서 요약(Document Summarization)에 활용. 문장 간 유사도 그래프에 PageRank를 적용하여 중요한 문장(Centrality 높은 문장)을 식별.
    - **SimRank (Glen & Widom, KDD'02)**:
        - "유사한 객체는 유사한 객체에 의해 참조된다"는 아이디어. 객체 관계의 이분 그래프(Bipartite Graph)에 PageRank와 유사한 원리를 적용하여 객체 간 구조적 유사도 측정.

### 5. HITS 알고리즘 (Hyperlink-Induced Topic Search, Jon Kleinberg)

- **기본 아이디어**: 웹 페이지를 두 가지 유형으로 구분.
    - **Authorities (권위 페이지)**: 특정 주제에 대해 신뢰할 수 있는 정보를 제공하는 페이지. (예: 특정 대학의 공식 웹사이트)
    - **Hubs (허브 페이지)**: 특정 주제에 대한 좋은 권위 페이지들로 연결되는 링크 목록을 잘 정리해 놓은 페이지. (예: 딥러닝 관련 좋은 논문/자료 모음 페이지)
- **상호 강화 관계 (Recursive Definition)**:
    - 좋은 허브는 많은 좋은 권위를 가리킨다.
    - 좋은 권위는 많은 좋은 허브로부터 링크를 받는다.
- **HITS 점수 계산**: 각 페이지는 주어진 쿼리에 대해 두 가지 점수를 가집니다.
    - **Authority Score ($a(p)$)**: 페이지 $p$로 들어오는 링크를 가진 허브들의 허브 점수 합. $a(p) \leftarrow \sum_{q: q \rightarrow p} h(q)$
    - **Hub Score ($h(p)$)**: 페이지 $p$가 가리키는 권위들의 권위 점수 합. $h(p) \leftarrow \sum_{q: p \rightarrow q} a(q)$
    - 매 반복마다 L2-정규화(Normalization)를 수행합니다.
- **행렬 형태**:
    - $\vec{a} \leftarrow L^T \vec{h}$ 이고 $\vec{h} \leftarrow L \vec{a}$ (여기서 $L$은 인접 행렬).
    - 즉, $\vec{a} \leftarrow L^T L \vec{a}$ 이고 $\vec{h} \leftarrow L L^T \vec{h}$. (고유값 문제로 귀결)
    - 멱 반복법으로 계산 가능.
- **HITS 적용 대상 행렬 구축**: 전체 웹이 아닌, 쿼리와 관련된 부분 집합에 대해 계산.
    1. **루트 집합 (Root Set)**: 주어진 쿼리를 포함하거나 랭킹 상위에 있는 문서들을 검색.
    2. **베이스 집합 (Base Set)**: 루트 집합의 페이지를 가리키거나, 루트 집합의 페이지가 가리키는 페이지들을 추가로 포함.
    3. 베이스 집합 내 페이지들로 인접 행렬 구성.
    - 이유: 계산 비용 절감, 쿼리 텍스트를 포함하지 않는 좋은 권위 페이지 발굴, 좋은 허브/권위 페이지를 하위 네트워크에 포함시키기 위함.
- **PageRank vs. HITS**:
    - **PageRank**: 쿼리 독립적(Query-Independent), 전역적인 중요도.
    - **HITS**: 쿼리 의존적(Query-Dependent), 특정 쿼리 주제에 대한 허브/권위.

---

## 

---

### 1. 문서 구조의 이해: 단순한 단어의 나열을 넘어서

- **전통적인 가정의 한계**: 문서를 단순 "단어의 나열"로 보는 것은 웹 문서의 풍부한 구조 정보를 간과하는 것입니다.
- **문서 내 구조 (Intra-document Structures)**:
    - 제목, 단락, 앵커 텍스트, 이미지 등은 문서의 의미와 관련성 파악에 중요한 단서이며, 각 부분은 문서의 전체 관련성에 서로 다른 기여를 할 수 있습니다.
    - **활용 방안**: Query-Likelihood 모델에서 각 부분에 다른 가중치를 부여하거나, 벡터 공간 모델에서 가중 TF(Weighted TF)를 적용하는 방식으로 활용 가능합니다.
- **문서 간 구조 (Inter-document Structure)**:
    - 웹 문서는 하이퍼링크를 통해 서로 연결되어 있으며, 이는 문서 간의 관계를 나타냅니다. 이 연결 관계는 문서의 중요도나 신뢰도를 평가하는 데 사용될 수 있습니다.

### 2. 링크가 제공하는 정보 및 링크 분석의 중요성 (복습 및 심화)

- **앵커 텍스트 (Anchor Text)**:
    - 다른 페이지가 현재 페이지를 어떻게 설명하는지 보여주며, 쿼리 확장이나 직접적인 색인 대상으로 활용될 수 있습니다. (예: "big blue" → IBM)
- **연결 관계 (Linkage Relation)**:
    - 다른 페이지로부터의 링크는 해당 페이지의 **유용성(Utility) 또는 권위(Authority)**에 대한 "추천" 또는 "지지(Endorsement)"로 해석될 수 있습니다. (PageRank의 기본 아이디어)
- **학술 논문 인용 네트워크와의 유사성 (Bibliometrics)**:
    - 논문 인용이 논문의 품질 지표가 되듯, 웹에서의 인커밍 링크(In-link)도 페이지의 중요도를 나타낼 수 있습니다.
- **웹 환경에서의 복잡성 및 링크 분석의 필요성**:
    - 하이퍼링크 생성 비용이 낮아 웹 스패머들이 인위적으로 In-link 수를 조작할 수 있습니다.
    - 따라서 단순한 In-link 수뿐만 아니라, **각 In-link의 품질**을 함께 고려하는 정교한 분석 방법이 필요합니다. (PageRank, HITS의 등장 배경)
- **링크 구조 분석의 역할**:
    - 웹 네트워크 구조의 특성을 기술하고, 웹 문서의 일반적인 유용성을 반영합니다.
    - 문서 랭킹의 중요한 요소로 활용됩니다. (Learning-to-Rank의 특징, Focused Crawling의 우선순위 결정 등)

### 3. PageRank 알고리즘 (Larry Page & Sergey Brin)

- **기본 아이디어: 임의 보행 모델 (Random Surfing Model)**:
    - 웹 서퍼가 링크를 따라 무작위로 이동하거나, 막다른 페이지에서는 임의의 페이지로 점프하는 행동을 모델링합니다.
- **PageRank 점수**: 웹 페이지의 전역적인 **인기도(Popularity)**를 나타내는 척도로, 링크 구조에만 의존합니다. 임의의 웹 서퍼가 특정 페이지에 도달할 확률로 해석됩니다.
- **PageRank 계산 공식 (Damping Factor $\alpha$ 도입)**:
    - $PR(u) = (1-\alpha) \sum_{v \in B_u} \frac{PR(v)}{L(v)} + \frac{\alpha}{N}$
    - $\alpha$ (Damping factor): 서퍼가 링크를 따라가지 않고 임의의 페이지로 점프할 확률 (보통 0.15, 즉 링크를 따라갈 확률은 0.85).
    - 이 공식은 막다른 페이지(Dead End)와 스파이더 트랩(Spider Trap, 특정 페이지들 사이에서만 맴도는 현상) 문제를 해결하고, 모든 페이지가 0이 아닌 PageRank 값을 갖도록 보장합니다.
- **PageRank의 이론적 모델: 마르코프 연쇄 (Markov Chains)**:
    - 웹 페이지를 상태(State)로, 페이지 간 링크를 상태 전이(Transition)로 하는 이산 시간 확률 과정입니다.
    - **전이 행렬 (Transition Matrix, M)**: PageRank 계산에 사용되는 행렬로, 한 페이지에서 다른 페이지로 이동할 확률을 나타냅니다.
        1. **초기 인접 행렬(A) 수정**: 행에 '1'이 없는 경우(막다른 페이지), 각 요소를 $1/N$로 대체.
        2. **정규화**: 각 행의 '1'을 해당 행의 '1'의 개수로 나눔 (나가는 링크가 있는 페이지에서 각 링크를 따라갈 확률).
        3. **Damping Factor 적용**: 결과 행렬에 $(1-\alpha)$를 곱함.
        4. **Random Jump 추가**: 모든 요소에 $\alpha/N$을 더하여 최종 전이 행렬 $M$을 만듦.
    - **정상 상태 분포 ($\pi$)**: $M^T\pi = \pi$ (또는 $\pi^T M = \pi^T$, 행렬 $M$의 정의에 따라)를 만족하는 확률 벡터. PageRank 점수는 이 정상 상태 분포에 해당하며, 마르코프 연쇄가 기약적(Irreducible)이고 비주기적(Aperiodic)일 때 유일하게 존재합니다. (Random Jump는 이 조건을 만족시킴)
- **PageRank 계산 방법**:
    - **멱 반복법 (Power Iteration)**: 초기 PageRank 벡터(예: 모든 페이지에 $1/N$)에서 시작하여, $PR_{new} = M^T PR_{old}$ (또는 $PR_{new}^T = PR_{old}^T M$) 연산을 PageRank 값이 수렴할 때까지 반복합니다. (매 반복마다 정규화 필요)
    - PageRank 점수는 전이 행렬 $M$의 가장 큰 고유값(1)에 해당하는 주요 고유 벡터(Principal Eigenvector)입니다.
- **PageRank 변형**
    - **주제 민감 PageRank (Topic-Specific PageRank / Personalized PageRank)**: 임의 점프 시 특정 주제와 관련된 페이지로만 점프하도록 하여 개인화된 랭킹 제공.
    - **LexRank**: 문장 간 유사도 그래프에 PageRank 적용 (문서 요약).
    - **SimRank**: 객체 관계의 이분 그래프에 PageRank와 유사한 원리 적용 (객체 간 구조적 유사도 측정).

### 4. HITS 알고리즘 (Hyperlink-Induced Topic Search, Jon Kleinberg)

- **기본 아이디어**: 웹 페이지를 **Authorities (권위 페이지)**와 **Hubs (허브 페이지)**로 구분하고, 이들의 상호 강화 관계를 통해 점수를 매깁니다.
    - **Authorities**: 특정 주제에 대해 신뢰할 수 있는 정보를 제공하는 페이지.
    - **Hubs**: 특정 주제에 대한 좋은 권위 페이지들로 연결되는 링크 목록을 잘 정리해 놓은 페이지.
- **상호 강화 관계 및 점수 계산**:
    - 좋은 허브는 많은 좋은 권위를 가리킨다 $\rightarrow$ 허브 점수($h(p)$)는 $p$가 가리키는 페이지들의 권위 점수 합으로 계산: $h(p) \leftarrow \sum_{q: p \rightarrow q} a(q)$.
    - 좋은 권위는 많은 좋은 허브로부터 링크를 받는다 $\rightarrow$ 권위 점수($a(p)$)는 $p$로 들어오는 링크를 가진 페이지들의 허브 점수 합으로 계산: $a(p) \leftarrow \sum_{q: q \rightarrow p} h(q)$.
    - 매 반복마다 L2-정규화(Normalization)를 수행합니다.
    - **중요**: HITS 점수는 **쿼리 의존적(Query-Dependent)**입니다.
- **행렬 형태 및 계산**:
    - 인접 행렬 $L$ (링크가 있으면 1, 없으면 0)을 사용하여 $\vec{a} \leftarrow L^T \vec{h}$ 이고 $\vec{h} \leftarrow L \vec{a}$.
    - 이는 $\vec{a} \leftarrow L^T L \vec{a}$ 이고 $\vec{h} \leftarrow L L^T \vec{h}$ 형태의 고유값 문제로 귀결되며, 멱 반복법으로 계산 가능합니다.
- **HITS 적용 대상 행렬 구축 (부분 집합 고려)**:
    1. **루트 집합 (Root Set)**: 주어진 쿼리에 대해 검색된 상위 K개 문서.
    2. **베이스 집합 (Base Set)**: 루트 집합의 페이지와 이들을 가리키거나 이들로부터 링크되는 페이지들을 포함하도록 확장.
    3. 베이스 집합 내 페이지들로 인접 행렬을 구성하여 HITS 알고리즘 적용.
    - 이유: 계산 비용 절감, 쿼리 텍스트를 포함하지 않는 좋은 권위 페이지 발굴, 좋은 허브/권위 페이지를 관련 하위 네트워크에 포함시키기 위함.

## 5. 요약 및 결론

사용자 행동 분석과 링크 분석은 정보 검색 시스템의 성능을 향상시키는 핵심적인 기술입니다. 명시적 피드백의 한계를 뚫고 사용자의 클릭 행동을 분석하여 암묵적 피드백을 수집하는 방법은 대량의 사용자 데이터를 활용할 수 있는 효과적인 접근법입니다.

문서 구조 정보와 앗커 텍스트 활용은 문서의 중요도를 평가하는 데 있어 검색 품질을 크게 개선할 수 있습니다. 특히 PageRank와 HITS 알고리즘은 웹의 링크 구조를 기반으로 문서의 중요도와 권위를 판단하는 핵심 기술로, 현대 검색 엔진의 과학적 방법론을 정립하는 기초가 되었습니다.

이러한 고급 검색 기술들은 단순한 키워드 기반 매칭을 넘어 사용자의 실제 정보 요구를 더 정확히 파악하고 사용자에게 가장 가치 있는 정보를 제공하는 데 핵심적인 역할을 합니다.

